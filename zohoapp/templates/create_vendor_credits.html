{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load tz %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<!-- <link rel="stylesheet" href="{% static 'assets/css/style.css' %}"> -->


<style>
  .modal{
    z-index: 9999;
    overflow: scroll;
  }
    input[type=text], select, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }
    
    label {
      padding: 12px 12px 12px 0;
      display: inline-block;
    }
    
    
    .row:after {
      content: "";
      display: table;
      clear: both;
    }
    
    @media screen and (max-width: 600px) {
      .col-25, .col-75, input[type=submit] {
        width: 100%;
        margin-top: 0;
      }
      input[type=text], select, textarea {
      width: 100%;

    }
    }

    .dropdown input,
    .dropdown button {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
    }

    .dropdown.open input,
    .dropdown.open button {
      display: block;
    }

    .row a{
      color: rgb(218, 164, 48);
      font-size: 12px;
    }

    .table th a{
      color:rgb(218, 164, 48);
      font-size: 11px;
      margin-left: 60px;
    }


    ::-webkit-scrollbar {
      width: 5px; 
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1; 
    }

    ::-webkit-scrollbar-thumb {
      background: #888; 
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555; 
    }
    .fields {
      display: none;
    }

  .btn1{
    color: white;
    background-color: rgb(214, 141, 5);
    border: 1px solid rgb(0, 0, 0);
  }

</style>


<div class="container-fulid containerprof">

  <div class="card radius-15 border-3 rounded" style="width: 100%;">
    <div class="card-body">
        <div class="card-title">
          <h2 class="mb-0 text-uppercase text-right mt-2"> Vendor Credits </h2>
        </div>
    </div>
  </div>
  <div>
  <div class="card radius-15 p-5 border-3 rounded">
    <form action="" id="forms" class="mt-2 mb-4" method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="row">
        <div class="col-md-3">
          <label>Vendor Name *</label>
        </div>
        <div class="col-md-6">
          <select name="vendor" id="vendor" class="form-control bg-light text-dark">
            <option value="" hidden>Select Vendor</option>
            {% for v in vendor %}
            <option value="{{ v.first_name }} {{ v.last_name }} {{v.id}}">{{ v.first_name }} {{ v.last_name }}</option>
            {% endfor %}
          </select>
      
        </div>
        <div class="col-md-1">
          <a href="" class="btn btn1  btn-warning text-white p-2" data-toggle="modal" data-target="#newvendor" style="font-size: large;margin-left: -20px;">+</a>
        </div>
        <div class="col-md-2"></div>
      </div>

      <div class="row mt-2 d-none" id="email_row">
        <div class="col-md-3">
          <label for="email_inp">Vendor Email</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control bg-light text-dark" id="email_inp" name="email_inp">
        </div>
      </div>

      <div class="row mt-2 d-none" id="gst_trt_row">
        <div class="col-md-3">
          <label for="gst_trt_inp">GST Treatment</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control bg-light text-dark" id="gst_trt_inp" name="gst_trt_inp">
        </div>
      </div>

      <div class="row mt-2 mb-2 d-none" id="gstin_row">
        <div class="col-md-3">
          <label for="gstin_inp">GST Number</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control bg-light text-dark"  id="gstin_inp" name="gstin_inp">
        </div>
      </div>

      <div class="row mt-2 mb-2 d-none" id="address_row">
        <div class="col-md-3">
          <label for="address_inp">Address </label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control bg-light text-dark"  id="address_inp" name="address_inp">
        </div>
      </div>
      <div class="row mt-2 mb-2 d-none" id="">
        <div class="col-md-3">
          <label for="">Company State</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control bg-light text-dark"  id="cstate" name="cstate" value="{{company.state}}">
        </div>
      </div>



      <div class="row mt-3 mb-2 d-none" id="sop_row">
        <div class="col-md-3">
          <label>Source of Supply*</label>
        </div>

        <div class="col-md-6">
            <select name="srcofsupply" id="srcofsupply" onclick="toggleDateInput()" onselect="calculateTaxAmount()" class="form-control bg-light text-dark">
              <option value="" hidden>Select</option>
              <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
              <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="volvo">[AS]-Assam</option>
              <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="volvo">[CH]-	Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
              <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="volvo">[DL]-	Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
              <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
              <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
              <option value="[KA]-Karnataka">[KA]-Karnataka</option><option selected value="[KL]-Kerala">[KL]-Kerala</option>
              <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
              <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
              <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
              <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
              <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
              <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
              <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
              <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
              <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
              <option value="[OT]-Other Territory">[OT]-Other Territory</option>
            </select>
            
        </div>
      </div>
      
      

      <div class="row mt-3 mb-2">
        <div class="col-md-3">
          <label for="credit_note">Credit Note *</label>
        </div>

        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="credit_note" name="credit_note" value="DUS-" maxlength="8" required>
        </div>
      </div>

      <div class="row mt-3 mb-2">
        <div class="col-md-3">
          <label for="order_number" >Order Number *</label>
        </div>

        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="order_number" name="order_number" required>
        </div>
      </div>
      <div class="row mt-3 mb-2">
        <div class="col-md-3">
          <label for="order_number" >Bill Number *</label>
        </div>

        <div class="col-md-6">
         <select id="bill_number" name="bill_number" class="form-select">
          <option value="" hidden>Select Bill</option>
          

         </select>
        </div>
      </div>

      <div class="row mt-3 mb-2" >
        <div class="col-md-3">
          <label for="date1">Vendor Credit Date</label>
        </div>
        <div class="col-md-3">
          <input type="date" class="form-control text-dark bg-light" id="credit_date" name="credit_date" required>
        </div>
      </div>


      



  
      <div class="row mt-5">
        <div class="col-md-12 table-responsive-md mt-3">
          <table class="table table-bordered table-dark"  id="item_table" onclick='toggleDateInput()'>
            <thead>
              <tr>
                <th>Items<a href="" data-toggle="modal" data-target="#newitem" class="text-capitalize"><span class="text-warning"><i class="fa fa-plus"></i> Item</span></a></th>
                
                <th class="text-right">Hsn</th>
                <th class="text-right">Quantity</th>
                <th class="text-right">Rate</th>
                <th class="text-right">Discount</th>
                <th class="text-right">Tax</th>
                <th class="text-right">Amount</th>
                <th class="text-right">Action</th>

              </tr>
            </thead>
            <tbody>
              <tr id="row1">
                <td style="width: 5%;">
                  <div >
                    <select class='form-control bg-light text-dark border-0 item_select itm' name='item[]' id='item1'>
                      <option value=" " selected hidden>Select Item</option>
                     
                    </select>
                  </div>
                </td>
                  

                  <td style="width: 13%;" class='text-right'><input type='text' id='hsn1'
                    class=' text-right hsn form-control bg-light text-dark' name='hsn[]'>
                  </td>
                  <td style="width: 9%;" class='text-right'>
                    <input type='number' id='qty1' class=' text-right qty form-control bg-light text-dark' name='quantity[]' value='0'>
                    
                  </td>
                  <td style="width: 10%;" class='text-right'><input type='number' id='rate1'
                          class=' text-right rate form-control bg-light text-dark' name='rate[]'
                          value='0'>
                  </td>
                  <td style="width: 9%;" class='text-right text-dark'><input type='number' id='discount1'
                          class=' text-right discount bg-light text-dark form-control' name='discount[]'
                          value='0'>
                  </td>
                  <td style="width: 12%;" class='text-right '> 
                    <select name='tax[]' id='tax1'class='form-control bg-light text-dark  text-right border-0 tax' onclick="toggleDateInput()">
                      <option value=""hidden>Select</option>
                      <optgroup class="text-center" label="GST">
                          
                        <option value="0">0% GST(0%)</option>
                        <option value="3">3.0% GST(3%)</option>
                        <option value="5">5.0% GST(5%)</option>
                        <option value="12">12.0% GST(12%)</option>
                        <option value="18">18.0% GST(18%)</option>
                        <option value="28">28.0% GST(28%)</option>
                      </optgroup>
                      <optgroup  class="text-center" label="IGST">
                        <option value="0">0% IGST(0%)</option>
                        <option value="3">3.0% IGST(3%)</option>
                        <option value="5">5.0% IGST(5%)</option>
                        <option value="12">12.0% IGST(12%)</option>
                        <option value="18">18.0% IGST(18%)</option>
                        <option value="28">28.0% IGST(28%)</option>             
                      </optgroup>
                    </select></td>
                  <td style="display: none;">
                      <input type="text" name='taxamount' id="taxamount1"
                          class=" taxamount text-dark" />
                  </td>
                  <td style="width: 15%;" class='text-right'><input type='number' id='amount1'
                          class=' text-right form-control amount bg-light text-dark' name='amount[]'
                          value='0.00'></td>
                  <td class='text-center'>
                    <button type='button' id='del_btn1' class='btn btn1 text-white btn-sm btn-outline-warning rounded-circle delete-row' style='width:30px'><i class="fa fa-close"></i></button>
                    <button type='button' class='btn btn1 text-white btn-sm btn-outline-warning rounded-circle clone-row' data-row=1 style='width:30px'><i class="fa fa-clone"></i>
                    </button>
                  </td>

              </tr>
            </tbody>
          </table>
          <button type="button" class="btn btn1 btn-outline-warning text-white mt-2"  id="add-row">Add another line</button>
       </div>
      </div>

      <div class="row  mt-4">
        <div class="col-sm-5 d-flex flex-column mt-auto">

          <label for="">Vendors Credit Note</label>
          <textarea name="customer_note" id="" cols="8" rows="8"placeholder=" Vendor Credit Notes"></textarea>

        </div>
        <div class="col-sm-1 mt-5" ></div>
        <div class="col-sm-6 mt-5" >
          <table class="table  text-white table-dark">
            <tr>
                <td>Sub Total</td>
                <td></td>
                <td>
                  <input type="number" id="subtotal" name="subtotal" step="any" value="0" class=" form-control bg-transparent border-0 subtotal text-white">
                </td>
            </tr>
            <tr style="display: none;" id="tr_igst">
                <td>IGST</td>
                <td></td>
                <td><input type="number" id='igst' name="igst" step="any" value="0.00"
                        class="form-control bg-transparent border-0  igst  text-white" ></td>
            </tr>
            <tr style="display: none;" id="tr_cgst">
                <td>CGST</td>
                <td></td>
                <td><input type="number" id='cgst' name="cgst" step="any" value="0.00"
                        class="form-control bg-transparent border-0  cgst text-white" ></td>
            </tr>
            <tr style="display: none;" id="tr_sgst">
                <td>SGST</td>
                <td></td>
                <td><input type="number" id='sgst' name="sgst" step="any" value="0.00"
                        class="form-control bg-transparent border-0 sgst  text-white" ></td>
            </tr>
            <tr>
                <td>Tax Amount</td>
                <td></td>
                <td><input type="number" id="total_taxamount" name="total_taxamount" step="any" value="0.00" 
                    class="total_taxamount form-control bg-transparent border-0   text-white"></td>
            </tr>
            <tr>
                <td>Shipping Charges</td>
                
                <td><input type="hidden" id="shipping_charge" step="any" value="0.00" 
                    class="form-control bg-transparent border-0 shipping_charge  ">
                </td>
                <td><input type="number" name="shipping_charge" class="form-control  bg-transparent border-0  text-light" id="shipping" value="0.00"> </td>
            </tr>
            <tr>
              <td>Adjustment </td> 
              
              <td><input type="hidden" id="adjustment_amount" name="" step="any" value="0.00" 
                  class="form-control bg-transparent border-0">
              </td>
              <td><input type="number" class="form-control  bg-transparent border-0  text-light" id="adjustment" name="adjustment_amount" step="any" value="0.00"> </td>
            </tr>
            
            <tr>
              <th>Total ( &#x20B9; )</th>
              <th></th>
              <th><input type="number" id="grandtotal" name="grandtotal" step="any" value="0.00" class="form-control bg-transparent border-0 grandtotal  text-white"></th>
            </tr>
          </table>
        </div>
      </div>

      <div class="row py-5 border-bottom">
        
        <div class="col-md-5 text-center bg-dark rounded" >
            <label class="text-white" for="">Attach File(s)</label><br>

            
            <input id="file-upload" class="form-control bg-light text-dark mb-4" type="file" name="file">



        </div>
      </div>
      <div class="row mt-5 mb-3 ">

        <div class="d-grid gap-5 d-md-block">
          <button class="btn btn1 btn-warning" type="button" style="width: 100px;"  onclick="Save()">Save</button>
          <button class="btn btn1 btn-warning" type="button" style="width: 100px;"  onclick="Draft()">Draft</button>
          <button class="btn btn1 btn-warning" type="reset"  style="width: 100px;">Cancel</button>
        </div>
       

      </div>
    </form>
    
    <div class="modal fade" id="newvendor">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Vendor</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalVendor">

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="validationCustom01">Title</label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <select name="title" id="title" class="form-control bg-light text-dark">
                      <option value="Mr.">Mr.</option>
                      <option value="Mrs.">Mrs.</option>
                      <option value="Miss">Miss</option>
                      <option value="Ms.">Ms.</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="fname">First name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="fname" name="firstname" required>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="lname">Last name</label>
                    <label id="vdisplayname" name = "vdisplayname" hidden></label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="lname" name="lastname">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="company">Company Name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="vcompany" name="vcompany_name">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="email">Email</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="email" class="form-control bg-light text-dark" id="vemail" name="vemail" placeholder="example@gmail.com">    
                  </div>              
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="email">Vendor Phone</label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="vw_mobile" placeholder="Work Number" maxlength="10" name="vw_mobile">
                  </div>        
                  <div class="col-md-3 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="vp_mobile" placeholder="Personal Number" maxlength="10" name="vp_mobile">
                  </div>          
                </div>

           
                <hr>
                <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>

                <div class="row mt-5">
                  <div class="col-md-3 mt-2">
                    <label for="wsite">Website</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="wsite" placeholder="www.example.com" name="website">
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="vskype">Skype name/Number</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark"  id="vskype" name="vskype">
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_desg">Designation</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="v_desg" name="v_desg">
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_dpt">Department</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="v_dpt" name="v_dpt">
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <select class="form-control bg-light text-dark" id="v_gsttype" name="v_gsttype" required>
                      <option selected disabled value="">Choose..</option>
                      <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                      <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                      <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                      <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                      <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                      <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                      <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                      <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                    </select>
                  </div>       
                </div>

                <div class="row gstrow d-none">
                  <div class="col-md-3 mt-2">
                    <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="v_gstin" name="v_gstin" placeholder="29APPCK7465F1Z1">
                    <label id="gst_label"></label>
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_pan">PAN Number</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                    <label id="pan_label"></label>
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="" style="color: rgb(190, 88, 88);">Source of Supply *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <select class="form-control bg-light text-dark" id="v_srcsupply" name="v_sourceofsupply">
                      <option value="Nill"></option>
                      <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                      <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                      <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                      <option value="[AS] Assam">[AS] Assam</option>
                      <option value="[BR] Bihar">[BR] Bihar</option>
                      <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                      <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                      <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                      <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                      <option value="[DL] Delhi">[DL] Delhi</option>
                      <option value="[GA] Goa">[GA] Goa</option>
                      <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                      <option value="[HR] Haryana">[HR] Haryana</option>
                      <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                      <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                      <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                      <option value="[KA] Karnataka">[KA] Karnataka</option>
                      <option value="[KL] Kerala">[KL] Kerala</option>
                      <option value="[LA] Ladakh">[LA] Ladakh</option>
                      <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                      <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                      <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                      <option value="[MN] Manipur">[MN] Manipur</option>
                      <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                      <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                      <option value="[NL] Nagaland">[NL] Nagaland</option>
                      <option value="[OD] Odisha">[OD] Odisha</option>
                      <option value="[PY] Puducherry">[PY] Puducherry</option>
                      <option value="[PB] Punjab">[PB] Punjab</option>
                      <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                      <option value="[SK] Sikkim">[SK] Sikkim</option>
                      <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                      <option value="[TS] Telangana">[TS] Telangana</option>
                      <option value="[TR] Tripura">[TR] Tripura</option>
                      <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                      <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                      <option value="[WB] West Bengal">[WB] West Bengal</option>
                      <option value="[OT] Other Territory">[OT] Other Territory</option>
                    </select>
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_curn">Currency </label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <select class="form-control bg-light text-dark" id="v_curn" name="v_curn" required>
                      <option selected disabled value="">Choose..</option>
                      <option value="INR">INR</option>
                    </select>
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_open">Opening Balance</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="v_open" name="v_open">
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_terms">Payment Terms</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <div class="d-flex">
                      <select class="form-control bg-light text-dark" id="v_terms" name="v_terms" required>
                        {% for p in payment %}
                        <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                        {% endfor %}
                      </select>                
                      <a href="#" class="btn btn1 btn-outline-warning py-2 my-1 ms-2 text-white" data-target="#newpayment" data-toggle="modal">+</a>   
                    </div>
                  </div>       
                </div>

                <hr>

                <div class="row">
                  <div class="col-md-6 mt-5 text-center text-uppercase">
                    <h4 class="mb-0">Billing Address</h4>
                  </div>
                  <div class="col-md-6 mt-5">
                    <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
                  </div>
                </div>
                <div class="row mt-2 m-0 p-0 mb-2">
                  <div class="col-md-9"> </div>
                  <div class="col-md-3 text-right  m-0 p-0">
                    <input type="checkbox" onclick="addressSame()" id="vokay" name="vokay">
                    <label for="vokay" style="color: #909091;">Same As Billing Address</label>
                  </div>
                </div>

                <div class="row mt-5">
                  <div class="col-md-1">
                    <label for="vstreet">Street</label>
                  </div>
                  <div class="col-md-4">
                    <textarea class="form-control bg-light text-dark street" id="vstreet" name="vstreet"></textarea>
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="vsstreet">Street</label>
                  </div>
                  <div class="col-md-4 ">
                    <textarea class="form-control bg-light text-dark street" id="vsstreet" name="vsstreet"></textarea>
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="vcity">City</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vcity" name="vcity" placeholder="City">  
                  </div>
                  <div class="col-md-1">
                  </div>
                  <div class="col-md-1">
                    <label for="vscity">City</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vscity" name="vscity" placeholder="City">  
                  </div>
                  <div class="col-md-1">
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="vstate">State</label>
                  </div>
                  <div class="col-md-4">
                    <select type="text" class="form-control bg-light text-dark" id="vstate" name="vstate">
                      <option value="" selected>Choose</option>
                      <option value="None Of This">None Of This</option>
                      <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                      </option>
                      <option value="Andhra Predhesh">Andhra Predhesh</option>
                      <option value="Arunachal Predesh">Arunachal Predesh</option>
                      <option value="Assam">Assam</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Chhattisgarh">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                      <option value="Damn anad Diu">Damn anad Diu</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Goa">Goa</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Predesh">Himachal Predesh</option>
                      <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                      <option value="Jharkhand">Jharkhand</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Madhya Predesh">Madhya Predesh</option>
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Manipur">Manipur</option>
                      <option value="Meghalaya">Meghalaya</option>
                      <option value="Mizoram">Mizoram</option>
                      <option value="Nagaland">Nagaland</option>
                      <option value="Odisha">Odisha</option>
                      <option value="Puducherry">Puducherry</option>
                      <option value="Punjab">Punjab</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Sikkim">Sikkim</option>
                      <option value="Tamil Nadu">Tamil Nadu</option>
                      <option value="Telangana">Telangana</option>
                      <option value="Tripura">Tripura</option>
                      <option value="Uttar Predesh">Uttar Predesh</option>
                      <option value="Uttarakhand">Uttarakhand</option>
                      <option value="West Bengal">West Bengal</option>
                      <option value="Other Territory">Other Territory</option>
                    </select>
                  </div>
                  <div class="col-md-1"></div>
  
                  <div class="col-md-1">
                    <label for="vsstate">State</label>
                  </div>
                  <div class="col-md-4 ">
                    <select type="text" class="form-control bg-light text-dark" id="vsstate" name="vsstate">
                      <option value="" selected>Choose</option>
                      <option value="None Of This">None Of This</option>
                      <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                      </option>
                      <option value="Andhra Predhesh">Andhra Predhesh</option>
                      <option value="Arunachal Predesh">Arunachal Predesh</option>
                      <option value="Assam">Assam</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Chhattisgarh">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                      <option value="Damn anad Diu">Damn anad Diu</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Goa">Goa</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Predesh">Himachal Predesh</option>
                      <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                      <option value="Jharkhand">Jharkhand</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Madhya Predesh">Madhya Predesh</option>
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Manipur">Manipur</option>
                      <option value="Meghalaya">Meghalaya</option>
                      <option value="Mizoram">Mizoram</option>
                      <option value="Nagaland">Nagaland</option>
                      <option value="Odisha">Odisha</option>
                      <option value="Puducherry">Puducherry</option>
                      <option value="Punjab">Punjab</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Sikkim">Sikkim</option>
                      <option value="Tamil Nadu">Tamil Nadu</option>
                      <option value="Telangana">Telangana</option>
                      <option value="Tripura">Tripura</option>
                      <option value="Uttar Predesh">Uttar Predesh</option>
                      <option value="Uttarakhand">Uttarakhand</option>
                      <option value="West Bengal">West Bengal</option>
                      <option value="Other Territory">Other Territory</option>
                    </select>
                  </div>

                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="vcountry">Country</label>
                  </div>
                  <div class="col-md-4 ">
                    <input type="text" class="form-control bg-light text-dark" id="vcountry" name="vcountry" placeholder="Country">  
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="vscountry">Country</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vscountry"  name="vscountry" placeholder="Country">
                  </div>
                  <div class="col-md-1 "></div>

                </div>

                <div class="row mt-2">

                  <div class="col-md-1">
                    <label for="vpincode">Pincode</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vpincode" name="vpincode" maxlength="6" placeholder="PIN Code"> 
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="vspincode">Pincode</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vspincode" name="vspincode" maxlength="6"  placeholder="PIN Code">  
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">

                  <div class="col-md-1">
                    <label for="vphone">Phone</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vphone" name="vphone"  placeholder="Phone"> 
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="vsphone">Phone</label>
                  </div>
                  <div class="col-md-4"> 
                    <input type="text" class="form-control bg-light text-dark" id="vsphone" name="vsphone"  placeholder="Phone">  
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">

                  <div class="col-md-1">
                    <label for="vfax">Fax</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vfax" name="vfax"  placeholder="FAX"> 
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="vsfax">Fax</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="vsfax" name="vsfax"  placeholder="FAX">  
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row">
                    <div class="col-md-6">
                      <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                      <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                      <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                    </div>
                </div>
                <div class="row">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn btn-outline-warning btn1 save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="vendorSave">Submit
                      </button> 

                      <button type="button" class="close btn-outline-warning btn1 btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
                  </div>
              </div>
          </div>
      </div>  
    </div>  

    <!-- payment modal -->


    <div class="modal fade" id="newpayment">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">Add Payment Term</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment">
                <div class="row mt-2">
                  <div class="col-md-2 mt-2"></div>
                  <div class="col-md-4 mt-2">
                    <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
                  </div>

                  <div class="col-md-4 mt-2">
                    <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
                  </div>
                  <div class="col-md-2 mt-2"></div>
                </div>


                <div class="row mt-2">
                  <div class="col-md-2 mt-2"></div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="term_name" name="term_name" required>      
                  </div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="term_days" name="term_days" required>
                  </div>
                  <div class="col-md-2 mt-2"></div>

                </div>
                
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="paySave">Save
                      </button> 
                      

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>  

    <!-- customer modal -->


    <div class="modal fade" id="newcustomer">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Customer</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalCustomer">
        
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="">Customer Type</label><br>
                  </div>
                  <div class="col-md-6 mt-2">
                    <div class="d-flex">
                      <div class="radio_opt mx-5 mt-2">
                        <input type="radio" id="business" name="radioCust" value="Business" >
                        <label for="option1">Business</label>
                      </div>
                      <div class="radio_opt mx-4 mt-2">
                        <input type="radio" id="individual" name="radioCust" value="Individual" >
                        <label for="option2">Individual</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row mt-5">
                  <div class="col-md-3">
                    <label for="ctitle">Title</label>
                  </div>
                  <div class="col-md-3">
                    <select name="ctitle" id="ctitle" class="form-control bg-light text-dark">
                      <option value="Mr." selected>Mr.</option>
                      <option value="Mrs.">Mrs.</option>
                      <option value="Ms.">Ms.</option>
                      <option value="Miss.">Miss.</option>
                      <option value="Dr.">Dr.</option>
                    </select>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cfname">First name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="cfname" name="cfirstname" required>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="clname">Last name</label>
                    <label id="cdisplayname" name = "cdisplayname" hidden></label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="clname" name="clastname">
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="ccompany">Company Name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="ccompany" name="ccompany_name">
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cemail">Customer Email</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="email" class="form-control bg-light text-dark" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$">    
                  </div>              
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="email">Customer Phone</label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
                  </div>        
                  <div class="col-md-3 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
                  </div>          
                </div>

           
                <hr>
                <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
                <div class="row mt-5">
                  <div class="col-md-3 mt-2">
                    <label for="facebook">Facebook</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="facebook" placeholder="www.example.com" name="facebook">
                  </div>       
                </div>
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="twitter">Twitter</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="twitter" placeholder="www.example.com" name="twitter">
                  </div>       
                </div>


                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="website">Website</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="website" placeholder="www.example.com" name="website">
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cskype">Skype name/Number</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="cskype" name="cskype">
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_desg">Designation</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="c_desg" name="c_desg">
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_dpt">Department</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="c_dpt" name="c_dpt">
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <select class="form-control bg-light text-dark" id="c_gsttype" name="c_gsttype" required>
                      <option value="value" selected>Select a Gst Treatment</option>
                      <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                      <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                      <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                      <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                      <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                      <option value="Special Economic Zone">Special Economic Zone</option>
                    </select>
                  </div>       
                </div>

                <!-- <div class="row gstrow d-none">
                  <div class="col-md-3 mt-2">
                    <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control" id="v_gstin" name="v_gstin" placeholder="29APPCK7465F1Z1">
                    <label id="gst_label"></label>
                  </div>       
                </div>

                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_pan">PAN Number</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                    <label id="pan_label"></label>
                  </div>       
                </div> -->

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <select class="form-control bg-light text-dark" id="placesupply" name="placesupply">
                      <option value="Nill"></option>
                      <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                      <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                      <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                      <option value="[AS] Assam">[AS] Assam</option>
                      <option value="[BR] Bihar">[BR] Bihar</option>
                      <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                      <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                      <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                      <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                      <option value="[DL] Delhi">[DL] Delhi</option>
                      <option value="[GA] Goa">[GA] Goa</option>
                      <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                      <option value="[HR] Haryana">[HR] Haryana</option>
                      <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                      <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                      <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                      <option value="[KA] Karnataka">[KA] Karnataka</option>
                      <option value="[KL] Kerala">[KL] Kerala</option>
                      <option value="[LA] Ladakh">[LA] Ladakh</option>
                      <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                      <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                      <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                      <option value="[MN] Manipur">[MN] Manipur</option>
                      <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                      <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                      <option value="[NL] Nagaland">[NL] Nagaland</option>
                      <option value="[OD] Odisha">[OD] Odisha</option>
                      <option value="[PY] Puducherry">[PY] Puducherry</option>
                      <option value="[PB] Punjab">[PB] Punjab</option>
                      <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                      <option value="[SK] Sikkim">[SK] Sikkim</option>
                      <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                      <option value="[TS] Telangana">[TS] Telangana</option>
                      <option value="[TR] Tripura">[TR] Tripura</option>
                      <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                      <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                      <option value="[WB] West Bengal">[WB] West Bengal</option>
                      <option value="[OT] Other Territory">[OT] Other Territory</option>
                    </select>
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-4 ">
                    <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference * </label>
                  </div>
                  <div class="col-md-5">
                    <div class="d-flex">
                      <div class="radio_opt mx-5 mt-2">
                        <input type="radio" id="item-tax3" name="radioOption2" value="Taxable" >
                        <label for="option3">Taxable</label>
                      </div>
                      <div class="radio_opt mx-4 mt-2">
                        <input type="radio" id="item-tax4" name="radioOption2" value="Tax-exempt" >
                        <label for="option4">Tax-exempt</label>
                      </div>
                    </div>
                  </div>       
                </div>

                <div class="row mt-2 mb-4 d-none inter-intra" >
                  <div class="col-md-3">
                    <label for="intra">Intra-State TAX</label>
                  </div>
                  <div class="col-md-3">
                    <select name="intra" class="form-control bg-light text-dark" id="intra1">
                      <option value="">Select GST</option>

                      <option value="GST0[0%]">GST0[0%]</option>
                      <option value="GST5[5%]">GST5[5%]</option>
                      <option value="GST12[12%]">GST12[12%]</option>
                      <option value="GST18[18%]">GST18[18%]</option>
                      <option value="GST28[28%]">GST28[28%]</option>
                    </select>             
                  </div>

                  
                  <div class="col-md-2">
                    <label for="inter">Inter-State TAX</label>
                  </div>
                  <div class="col-md-3">
                    <select name="inter" class="form-control bg-light text-dark" id="inter1">
                      <option value="">Select GST</option>

                      <option value="IGST0[0%]">IGST0[0%]</option>
                      <option value="IGST5[5%]">IGST5[5%]</option>
                      <option value="IGST12[12%]">IGST12[12%]</option>
                      <option value="IGST18[18%]">IGST18[18%]]</option>
                      <option value="IGST28[28%]">IGST28[28%]</option>
                    </select>               
                  </div>
                  <div class="col-md-1"></div>

                </div>
                
                <hr>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_curn">Currency </label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <select class="form-control bg-light text-dark"id="c_curn" name="c_curn" required>
                      <option selected disabled value="">Choose..</option>
                      <option value="INR">INR</option>
                    </select>
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_open">Opening Balance</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="c_open" name="c_open">
                  </div>       
                </div>

                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_terms">Payment Terms</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <div class="d-flex">
                      <select class="form-control bg-light text-dark" id="c_terms" name="c_terms" required>
    
                        {% for p in payment %}
                        <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                        {% endfor %}
                      </select>                
                    </div>
                  </div>       
                </div>
                

                <hr>

                <div class="row">
                  <div class="col-md-6 mt-5 text-center text-uppercase">
                    <h4 class="mb-0">Billing Address</h4>
                  </div>
                  <div class="col-md-6 mt-5">
                    <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
                  </div>
                </div>
                <div class="row mt-2 m-0 p-0 mb-2">
                  <div class="col-md-9"> </div>
                  <div class="col-md-3 text-right  m-0 p-0">
                    <input type="checkbox" onclick="address()" id="voka" name="vokay">
                    <label for="voka" style="color: #909091;">Same As Billing Address</label>
                  </div>
                </div>

                <div class="row mt-5">
                  <div class="col-md-1">
                    <label for="cstreet">Address</label>
                  </div>
                  <div class="col-md-4">
                    <textarea class="form-control bg-light text-dark street" id="cstreet" name="vstreet"></textarea>
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="csstreet">Address</label>
                  </div>
                  <div class="col-md-4 ">
                    <textarea class="form-control bg-light text-dark street" id="csstreet" name="vsstreet"></textarea>
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="ccity">City</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="ccity" name="vcity" placeholder="City">  
                  </div>
                  <div class="col-md-1">
                  </div>
                  <div class="col-md-1">
                    <label for="cscity">City</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="cscity" name="cscity" placeholder="City">  
                  </div>
                  <div class="col-md-1">
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="cstate">State</label>
                  </div>
                  <div class="col-md-4">
                    <select type="text" class="form-control bg-light text-dark" id="cstate" name="vstate">
                      <option value="" selected>Choose</option>
                      <option value="None Of This">None Of This</option>
                      <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                      </option>
                      <option value="Andhra Predhesh">Andhra Predhesh</option>
                      <option value="Arunachal Predesh">Arunachal Predesh</option>
                      <option value="Assam">Assam</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Chhattisgarh">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                      <option value="Damn anad Diu">Damn anad Diu</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Goa">Goa</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Predesh">Himachal Predesh</option>
                      <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                      <option value="Jharkhand">Jharkhand</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Madhya Predesh">Madhya Predesh</option>
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Manipur">Manipur</option>
                      <option value="Meghalaya">Meghalaya</option>
                      <option value="Mizoram">Mizoram</option>
                      <option value="Nagaland">Nagaland</option>
                      <option value="Odisha">Odisha</option>
                      <option value="Puducherry">Puducherry</option>
                      <option value="Punjab">Punjab</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Sikkim">Sikkim</option>
                      <option value="Tamil Nadu">Tamil Nadu</option>
                      <option value="Telangana">Telangana</option>
                      <option value="Tripura">Tripura</option>
                      <option value="Uttar Predesh">Uttar Predesh</option>
                      <option value="Uttarakhand">Uttarakhand</option>
                      <option value="West Bengal">West Bengal</option>
                      <option value="Other Territory">Other Territory</option>
                    </select>
                  </div>
                  <div class="col-md-1"></div>
  
                  <div class="col-md-1">
                    <label for="csstate">State</label>
                  </div>
                  <div class="col-md-4 ">
                    <select type="text" class="form-control bg-light text-dark" id="csstate" name="vsstate">
                      <option value="" selected>Choose</option>
                      <option value="None Of This">None Of This</option>
                      <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                      </option>
                      <option value="Andhra Predhesh">Andhra Predhesh</option>
                      <option value="Arunachal Predesh">Arunachal Predesh</option>
                      <option value="Assam">Assam</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Chhattisgarh">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                      <option value="Damn anad Diu">Damn anad Diu</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Goa">Goa</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Predesh">Himachal Predesh</option>
                      <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                      <option value="Jharkhand">Jharkhand</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Madhya Predesh">Madhya Predesh</option>
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Manipur">Manipur</option>
                      <option value="Meghalaya">Meghalaya</option>
                      <option value="Mizoram">Mizoram</option>
                      <option value="Nagaland">Nagaland</option>
                      <option value="Odisha">Odisha</option>
                      <option value="Puducherry">Puducherry</option>
                      <option value="Punjab">Punjab</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Sikkim">Sikkim</option>
                      <option value="Tamil Nadu">Tamil Nadu</option>
                      <option value="Telangana">Telangana</option>
                      <option value="Tripura">Tripura</option>
                      <option value="Uttar Predesh">Uttar Predesh</option>
                      <option value="Uttarakhand">Uttarakhand</option>
                      <option value="West Bengal">West Bengal</option>
                      <option value="Other Territory">Other Territory</option>
                    </select>
                  </div>

                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="ccountry">Country</label>
                  </div>
                  <div class="col-md-4 ">
                    <input type="text" class="form-control bg-light text-dark" id="ccountry" name="vcountry" placeholder="Country">  
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="cscountry">Country</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="cscountry"  name="vscountry" placeholder="Country">
                  </div>
                  <div class="col-md-1 "></div>

                </div>

                <div class="row mt-2">

                  <div class="col-md-1">
                    <label for="cpincode">Pincode</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="cpincode" name="vpincode" maxlength="6" placeholder="PIN Code"> 
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="cspincode">Pincode</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="cspincode" name="vspincode" maxlength="6"  placeholder="PIN Code">  
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">

                  <div class="col-md-1">
                    <label for="cphone">Phone</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="cphone" name="vphone"  placeholder="Phone"> 
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="csphone">Phone</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="csphone" name="vsphone"  placeholder="Phone">  
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">

                  <div class="col-md-1">
                    <label for="cfax">Fax</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="cfax" name="vfax"  placeholder="FAX"> 
                  </div>
                  <div class="col-md-1"></div>

                  <div class="col-md-1">
                    <label for="csfax">Fax</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control bg-light text-dark" id="csfax" name="vsfax"  placeholder="FAX">  
                  </div>
                  <div class="col-md-1"></div>

                </div>

                <div class="row mt-2">
                    <div class="col-md-6">
                      <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                      <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                      <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                    </div>
                </div>
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="customersave"  >Submit
                      </button> 

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
                  </div>
              </div>
          </div>
      </div>  
    </div>  

    <!-- item modal -->

    <div class="modal fade" id="newitem">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Item</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalItem">

                <div class="row mt-2">
                  <div class="col-md-4 mr-0">
                    <label class="col-form-label col-sm-2 p-0">Type <i class="fa fa-question-circle"></i></label>
                  </div>
                  <div class="col-md-5 ml-0 d-flex">
                    <div class="radio_opt mx-5 ">
                      <input type="radio" id="item_type1" name="radioOption" value="Goods" >
                      <label for="option1">Goods</label>
                    </div>
                    <div class="radio_opt mx-5 ">
                      <input type="radio" id="item_type2" name="radioOption" value="Services" >
                      <label for="option2">Services</label>
                    </div>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-3">
                    <label for="name" style="color: rgb(190, 88, 88);">Name *</label>
                  </div>
                  <div class="col-md-6">
                    <input type="text" class="form-control bg-light text-dark" id="item_name" name="item_name" required>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-3">
                    <label for="hsn" style="color: rgb(190, 88, 88);">HSN Code *</label>
                  </div>
                  <div class="col-md-6">
                    <input type="number" class="form-control bg-light text-dark" id="hsn" name="hsn" maxlength="6" oninput="validateInput(this)" required>
                  </div>
                </div>
                
                <div id="validationResult"></div>
                
                <script>
                  function validateSixDigits(field) {
                    // Define the regular expression pattern for exactly six digits
                    var pattern = /^\d{6}$/;
                
                    // Check if the field matches the pattern
                    return pattern.test(field);
                  }
                
                  function validateInput(inputField) {
                    var inputValue = inputField.value;
                    var validationResultDiv = document.getElementById("validationResult");
                
                    if (validateSixDigits(inputValue)) {
                      validationResultDiv.textContent = "Valid: The field contains exactly six digits.";
                    } else {
                      validationResultDiv.textContent = "Invalid: The field does not contain exactly six digits.";
                    }
                  }
                </script>
                

                <div class="row mt-2">
                  <div class="col-md-3 ">
                    <label for="units">Unit</label>
                  </div>
                  <div class="col-md-6">
                    <div class="d-flex">
                      <select class="form-control bg-light text-dark" id="item_units" name="item_units" required>
                        <option value="">Select Unit</option>
                        {% for u in units %}
                        <option value="{{u.id}}">{{u.unit}}</option>
                        {% endfor %}
                      </select>                
                      <a href="#" class="btn btn-outline-warning btn1 py-2 my-1 ms-2 text-white" data-target="#newunit" data-toggle="modal">+</a>  
                    </div>
                  </div>
                </div>

                

                <!-- <div class="form-group row">
              <label  class="col-sm-2 col-form-label">HSN Code</label> 
              <div class="col-sm-10 col-md-7 col-9"  style="margin-left: -2.2rem;" >
                <input required type="number" class="form-control bg-dark" name="hsn" id="myInputField" oninput="validateInput()">
                <div id="validationResult"></div>
              </div>
            </div> -->

                <div class="row mt-2">
                  <div class="col-md-4 ">
                    <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference * </label>
                  </div>
                  <div class="col-md-5">
                    <div class="d-flex">
                      <div class="radio_opt mx-5 mt-2">
                        <input type="radio" id="item-tax1" name="radioOption1" value="Taxable" >
                        <label for="option1">Taxable</label>
                      </div>
                      <div class="radio_opt mx-4 mt-2">
                        <input type="radio" id="item-tax2" name="radioOption1" value="Tax-exempt" >
                        <label for="option2">Tax-exempt</label>
                      </div>
                    </div>
                  </div>       
                </div>

                <div class="row mt-2 mb-4 d-none inter-intra" >
                  <div class="col-md-3">
                    <label for="intra">Intra-State TAX</label>
                  </div>
                  <div class="col-md-3">
                    <select name="intra" class="form-control bg-light text-dark" id="intra">
                      <option value="">Select GST</option>

                      <option value="GST0[0%]">GST0[0%]</option>
                      <option value="GST5[5%]">GST5[5%]</option>
                      <option value="GST12[12%]">GST12[12%]</option>
                      <option value="GST18[18%]">GST18[18%]</option>
                      <option value="GST28[28%]">GST28[28%]</option>
                    </select>             
                  </div>

                  
                  <div class="col-md-2">
                    <label for="inter">Inter-State TAX</label>
                  </div>
                  <div class="col-md-3">
                    <select name="inter" class="form-control bg-light text-dark" id="inter">
                      <option value="">Select GST</option>

                      <option value="IGST0[0%]">IGST0[0%]</option>
                      <option value="IGST5[5%]">IGST5[5%]</option>
                      <option value="IGST12[12%]">IGST12[12%]</option>
                      <option value="IGST18[18%]">IGST18[18%]]</option>
                      <option value="IGST28[28%]">IGST28[28%]</option>
                    </select>               
                  </div>
                  <div class="col-md-1"></div>

                </div>
                
                <hr>

                <div class="row mt-5 text-center">
                  <div class="col-md-6 d-flex text-center">
                    <input  type="checkbox" name="selling" checked class="mx-2 my-0">
                    <h6 class="m-0">Selling Information</h6>
                  </div>
                  <div class="col-md-6 d-flex text-center">
                    <input  type="checkbox" name="purchase" checked class="mx-2 my-0">
                    <h6 class="m-0">Purchase Information</h6>
                  </div>
                </div>
                
                <div class="row mt-4">
                  <div class="col-md-2">
                    <label for="sell_price">Selling Price *</label>
                  </div>
                  <div class="col-md-4">
                    <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <div class="input-group-text">INR</div>
                      </div>
                      <input required type="text" class="form-control bg-light text-dark" name="sell_price" id="sell_price">
                    </div>                  
                  </div>

                  <div class="col-md-2">
                    <label for="cost_price">Cost Price *</label>
                  </div>
                  <div class="col-md-4 ">
                    <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <div class="input-group-text">INR</div>
                      </div>
                      <input required type="text" class="form-control bg-light text-dark" name="cost_price" id="cost_price">
                    </div>
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-md-2">
                    <label for="vcity">Account</label>
                  </div>
                  <div class="col-md-4">
                    <select name="sell_acc" id="sell_acc" class="form-control bg-light text-dark">
                      <option value="">Select Account</option>
       
                        <option value="" disabled class="btn btn-dark text-white"><b>SALES</b></option>
                        {% for s in sales %}
                            <option value="{{s.id}}">{{ s.Account_name }}</option>
                      {% endfor %}
                    </select> 
                  </div>
                  <div class="col-md-2">
                    <label for="cost_acc">Account</label>
                  </div>
                  <div class="col-md-4">
                    <select name="cost_acc" class="form-control bg-light text-dark" id="cost_acc">
                      <option value="">Select Account</option>


                      
                        <option value="" disabled class="btn btn-dark text-white"><b>PURCHASE</b></option>
                        {% for p in purchase %}
                            <option value="{{p.id}}">{{ p.Account_name }}</option>
                      {% endfor %}

                    </select> 
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-md-2">
                    <label for="sell_desc">Description</label>
                  </div>
                  <div class="col-md-4">
                    <input  type="text" name="sell_desc" class="form-control bg-light text-dark"  id="sell_desc">
                  </div>
  
                  <div class="col-md-2">
                    <label for="cost_desc">Description</label>
                  </div>
                  <div class="col-md-4 ">
                    <input  type="text" name="cost_desc" class="form-control bg-light text-dark"  id="cost_desc">
                  </div>

                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                      <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                      <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                      <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                    </div>
                </div>
                <div class="row">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn btn-outline-warning btn1 save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="itemSave">Submit
                      </button> 

                      <button type="button" class="close btn btn-outline-warning btn1 save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
                  </div>
              </div>
          </div>
      </div>  
    </div>  


    <!-- unit modal -->

    <div class="modal fade" id="newunit">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">Add Unit</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalUnit">
                <div class="row mt-2">
                  <div class="col-md-3 mt-2"></div>
                  <div class="col-md-1 mt-2">
                    <label for="unit" style="color: rgb(190, 88, 88);">Unit</label>
                  </div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="unit" name="unit" required>
                  </div>
                  <div class="col-md-4 mt-2"></div>
                </div>
                
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="unitSave">Save
                      </button> 
                      

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>  


    <!-- account modal -->

    <div class="modal fade" id="newaccount">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Account</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalAccount">
        
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="">Account Type</label><br>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="acct_type" name="acct_type" required>
                  </div>
                </div>
                
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cfname">Account name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control bg-light text-dark" id="acct_name" name="acct_name" required>
                  </div>
                </div>            

                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="accountSave">Submit
                      </button> 

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>  


    <!-- end of modal -->



    
  </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>

  $(document).ready(function() {
    $('#vendor').change(function() {
        var name = $("#vendor").val();
        var na = name.split(' ');

        $.ajax({
          url: "{% url 'get_vendor_credit_det' %}",
          data: { 
              fname: na[0],
              lname: na[1],
              id: na[2],
              csrfmiddlewaretoken: '{{ csrf_token }}' 
          },
          type: 'POST',
          success: function(data) {
            $("#email_row, #gst_trt_row, #address_row, #sop_row").removeClass('d-none').addClass('d-flex');

            // Check if any input box is empty in the GSTIN row
            if (!data.gst_number || !data.vendor_email || !data.gst_treatment) {
                $("#gstin_row").removeClass('d-flex').addClass('d-none');
            } else {
                $("#gstin_row").removeClass('d-none').addClass('d-flex');
            }

            // Check if any input box is empty in the Address row
            if (!data.baddress) {
                $("#address_row").removeClass('d-flex').addClass('d-none');
            } else {
                $("#address_row").removeClass('d-none').addClass('d-flex');
            }

            $('#email_inp').val(" " + data.vendor_email);
            $('#gst_trt_inp').val(" " + data.gst_treatment);
            $('#gstin_inp').val(" " + data.gst_number);
            $('#address_inp').val(" " + data.baddress);

            const sopSelect = $('#srcofsupply');
            // sopSelect.empty();

            // Append the "Select" option with an empty value
            sopSelect.append($('<option>', {
                value: '',
                text: 'Select',
                hidden: 'hidden'
            }));

            if (data.sop) {
                // Append the SOP option with the received value and text
                sopSelect.append($('<option>', {
                  value: data.sop,
                  text: data.sop,
                  hidden: 'hidden'
                }));

                // Set the selected option
                sopSelect.val(data.sop);
            } else {
                // Handle the case where SOP is not available
                sopSelect.append($('<option>', {
                    text: 'No SOP found',
                    disabled: 'disabled',
                    selected: 'selected'
                }));
            }

            //shows billno based on vendor
            const billSelect = $('#bill_number');
            const itemSelect = $('#item1');
            billSelect.empty();  // Clear previous options
            itemSelect.empty();

            // Append the "Select Bill" option with an empty value
            billSelect.append($('<option>', {
                value: '',
                text: 'Select bill',
                hidden: 'hidden'
            }));
            itemSelect.append($('<option>', {
                value: '',
                text: 'Select Item',
                hidden: 'hidden'
            }));

            if (data.bill_data.length > 0) {
                $.each(data.bill_data, function (index, bill) {
                    billSelect.append($('<option>', {
                        value: bill.id,
                        text: bill.bill_number
                    }));
                });
            } else {
                billSelect.append($('<option>', {
                    text: 'No bills found'
                }));
            }
            // Clear data in the default row
            $('#hsn1').val('');
            $('#qty1').val('0');
            $('#rate1').val('0');
            $('#discount1').val('0');
            $('#tax1').val('');
            $('#taxamount1').val('');
            $('#amount1').val('0.00');

            $('#subtotal').val('0.00');
            $('#igst').val('0.00');
            $('#cgst').val('0.00');
            $('#sgst').val('0.00');
            $('#total_taxamount').val('0.00');
            $('#shipping').val('0.00');
            $('#adjustment').val('0.00');
            $('#grandtotal').val('0.00');

            // Delete any appended rows
            $('#item_table tbody tr[id^="row"]').not('#row1').remove();
          }
      });
    });
  });

  

  $(document).ready(function() {
    $('#custom').change(function() {
      var name = $("#custom").val();
      var na = name.split(' ');
      console.log(name)
      $.ajax({
        url: "{% url 'customer_det' %}",
        data: {
          name:name,
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
        type: 'POST',
        success: function(data) {
          $("#cemail_inp").val(data.customer_email);
          $("#custAddress").val(data.adres);
          $("#custstreet").val(data.streat);
          $("#custcity").val(data.city);
          $("#custstate").val(data.state);
          document.getElementById('company_state').value = data.st

        }
      });
    });
  });







  $(document).ready(function() {
    $("#fname, #lname").change(function() {
      $("#vdisplayname").text($("#title").val() +" " + $("#fname").val() + " " + $("#lname").val());
    });
  });


  $(document).ready(function() {
    $("#v_gsttype").change(function() {
      var x=$('#v_gsttype').val();
      // console.log(x)
      if(x=="unregistered Business") 
      {
        $(".gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstrow").addClass('d-none');
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      }
    
    });
  });


    $(document).ready(function() {
    $("#v_gstin").change(function() {

        var x=$("v_gstin").val();
        var gst_label=document.getElementById("gst_label")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
            gst_label.style.color="red";
            gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_label.style.color="green";
            gst_label.innerHTML = "valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#v_pan").change(function() {
        var x= $("#v_pan").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "valid PAN Number.";

        }
      });
    });

    $(document).ready(function() {
    $("#cfname, #clname").change(function() {
      $("#cdisplayname").text($("#ctitle").val() +" " + $("#cfname").val() + " " + $("#clname").val());
    });
  });


  $(document).ready(function() {
    $("#c_gsttype").change(function() {
      var x=$('#c_gsttype').val();
      // console.log(x)
      if(x=="unregistered Business") 
      {
        $(".gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstrow").addClass('d-none');
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      }
    
    });
  });


    $(document).ready(function() {
    $("#c_gstin").change(function() {

        var x=$("c_gstin").val();
        var gst_label=document.getElementById("gst_label")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
            gst_label.style.color="red";
            gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_label.style.color="green";
            gst_label.innerHTML = "valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#c_pan").change(function() {
        var x= $("#c_pan").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "valid PAN Number.";

        }
      });
    });


  function addressSame(){
    var chkbtn = document.getElementById('vokay');
    if (chkbtn.checked == true) {
      document.getElementById('vsstreet').value = document.getElementById('vstreet').value;
      document.getElementById('vscity').value = document.getElementById('vcity').value;
      document.getElementById('vspincode').value = document.getElementById('vpincode').value;
      document.getElementById('vscountry').value = document.getElementById('vcountry').value;
      document.getElementById('vsstate').value = document.getElementById('vstate').value;
      document.getElementById('vsphone').value = document.getElementById('vphone').value;
      document.getElementById('vsfax').value = document.getElementById('vfax').value;
    } 
    else {
      document.getElementById('vsstreet').value = '';
      document.getElementById('vscity').value = '';
      document.getElementById('vsstate').value = '';
      document.getElementById('vspincode').value = '';
      document.getElementById('vscountry').value = '';
      document.getElementById('vsphone').value = '';
      document.getElementById('vsfax').value = '';
    }
  }



  function address(){
    var chkbtn = document.getElementById('voka');
    if (chkbtn.checked == true) {
      document.getElementById('csstreet').value = document.getElementById('cstreet').value;
      document.getElementById('cscity').value = document.getElementById('ccity').value;
      document.getElementById('cspincode').value = document.getElementById('cpincode').value;
      document.getElementById('cscountry').value = document.getElementById('ccountry').value;
      document.getElementById('csstate').value = document.getElementById('cstate').value;
      document.getElementById('csphone').value = document.getElementById('cphone').value;
      document.getElementById('csfax').value = document.getElementById('cfax').value;
    } 
    else {
      document.getElementById('csstreet').value = '';
      document.getElementById('cscity').value = '';
      document.getElementById('csstate').value = '';
      document.getElementById('cspincode').value = '';
      document.getElementById('cscountry').value = '';
      document.getElementById('csphone').value = '';
      document.getElementById('csfax').value = '';
    }
  }
  //------customer create 

$(document).on("click","#customersave",function(){
  if ($('input[name="radioCust"]:checked').val() == 'Business'){

    itemtype = $('#business').val();
  }
  else{
    itemtype = $('#individual').val();
  }

  if ($('input[name="radioOption2"]:checked').val() == 'Taxable'){
    inte = $('#item-tax3').val();
    
  }
  else{
    inte = $('#item-tax4').val();
  }


  $.ajax({
    
    type : 'POST',
    url:"{% url 'purchase_customer' %}",

    data:{
        tax:inte,
        itemtype:itemtype,
        title : $("#ctitle").val(),
        firstname : $("#cfname").val(),
        lastname : $("#clname").val(),
        company_name : $("#ccompany").val(),
        display_name : $('#cdisplayname').text(),
        email : $("#cemail").val(),
        website :$("#cwsite").val(),
        work_mobile :$("#cw_mobile").val(),
        pers_mobile :$("#cp_mobile").val(),
        skype :$("#cskype").val(),
        facebook :$("#facebook").val(),
        twitter :$("#twitter").val(),
        desg :$("#c_desg").val(),
        dpt :$("#c_dpt").val(),
        gsttype :$("#c_gsttype").val(),
        gstin :$("#c_gstin").val(),
        panno : $("#c_pan").val(),
        placesupply :$("#placesupply").val(),
        currency : $("#c_curn").val(),
        openingbalance : $("#c_open").val(),
        paymentterms : $("#c_terms").val(),
        street : $("#cstreet").val(),
        city : $("#ccity").val(),
        state : $("#cstate").val(),
        pincode : $("#cpincode").val(),
        fax : $("#cfax").val(),
        phone : $("#cphone").val(),
        country : $("#ccountry").val(),
        shipstreet : $("csstreet").val(),
        shipcity : $("#cscity").val(),
        shipstate : $("#csstate").val(),
        shippincode : $("#cspincode").val(),
        shipcountry : $("#cscountry").val(),
        shipfax : $("#csfax").val(),
        shipphone : $("#csphone").val(),
        radioCust: $("input[name='radioCust']:checked").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',
      },
      
      success: function(response) {
        document.getElementById("modalCustomer").reset();
        

        reloadcustomer();
        
      },
  });        
});

function reloadcustomer() {

  $.ajax({
    url: "{% url 'customer_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdow = $('#custom');
      dropdow.empty();
      $.each(data, function(key, value) {
          dropdow.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


  //---------modal vendor-----

$(document).on("click","#vendorSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'vendor_credit_vendor' %}",

    data:{
        title : $("#title").val(),
        firstname : $("#fname").val(),
        lastname : $("#lname").val(),
        company_name : $("#vcompany").val(),
        display_name : $('#vdisplayname').text(),
        email : $("#vemail").val(),
        website :$("#wsite").val(),
        work_mobile :$("#vw_mobile").val(),
        pers_mobile :$("#vp_mobile").val(),
        skype :$("#vskype").val(),
        desg :$("#v_desg").val(),
        dpt :$("#v_dpt").val(),
        gsttype :$("#v_gsttype").val(),
        gstin :$("#v_gstin").val(),
        panno : $("#v_pan").val(),
        sourceofsupply :$("#v_srcsupply").val(),
        currency : $("#v_curn").val(),
        openingbalance : $("#v_open").val(),
        paymentterms : $("#v_terms").val(),
        street : $("#vstreet").val(),
        city : $("#vcity").val(),
        state : $("#vstate").val(),
        pincode : $("#vpincode").val(),
        fax : $("#vfax").val(),
        phone : $("#vphone").val(),
        country : $("#vcountry").val(),
        shipstreet : $("#vsstreet").val(),
        shipcity : $("#vscity").val(),
        shipstate : $("#vsstate").val(),
        shippincode : $("#vspincode").val(),
        shipcountry : $("#vscountry").val(),
        shipfax : $("#vsfax").val(),
        shipphone : $("#vsphone").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalVendor").reset();
        reloadVendor();
      },
  });        
});

function reloadVendor() {
  $.ajax({
    url: "{% url 'vendor_credit_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#vendor');
      dropdown.empty();
      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value[0]+" " +value[1] + ' ' + value[2]).val(value[1] + ' ' + value[2]+ ' ' +value[3]));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}

//--------payment terms modal-----------

$(document).on("click","#paySave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'vendor_credits_pay' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalPayment").reset();
        reloadPayment();
      },
  });        
});

function reloadPayment() {

  $.ajax({
    url: "{% url 'vendor_credits_pay_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#terms');
      dropdown.empty();
      var drpv = $('#v_terms');
      drpv.empty();
      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
          drpv.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


// unit modal


$(document).on("click","#unitSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'vendor_credits_unit' %}",

    data:{
        unit : $("#unit").val(),      
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalUnit").reset();
        reloadUnit();
      },
  });        
});


function reloadUnit() {

  $.ajax({
    url: "{% url 'vendor_credits_unit_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#item_units');
      dropdown.empty();

      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


// item modal

$(document).ready(function() {
  $("#item-tax1").click(function() {
  //  console.log($("#item_units").val().split(' ')[0]);
    $(".inter-intra").removeClass('d-none');
    $(".inter-intra").addClass('d-flex');
  });

  $("#item-tax2").click(function() {

    $(".inter-intra").removeClass('d-flex');
    $(".inter-intra").addClass("d-none");
  });
});

$(document).ready(function() {
  $("#item-tax3").click(function() {
  //  console.log($("#item_units").val().split(' ')[0]);
    $(".inter-intra").removeClass('d-none');
    $(".inter-intra").addClass('d-flex');
  });

  $("#item-tax4").click(function() {

    $(".inter-intra").removeClass('d-flex');
    $(".inter-intra").addClass("d-none");
  });
});

$(document).on("click","#itemSave",function(){

  if ($('input[name="radioOption"]:checked').val() == 'Goods'){

      itemtype = $('#item_type1').val();
    }
  else{
    itemtype = $('#item_type2').val();
  }

  if ($('input[name="radioOption1"]:checked').val() == 'Taxable'){
      inter = $('#inter').val();
      intra = $('#intra').val();
    }
  else{
    inter = 0;
    intra = 0;
  }

  
  $.ajax({
    
    type : 'POST',
    url:"{% url 'vendor_credit_item' %}",
    
    data:{
        type : itemtype,
        name : $("#item_name").val(),
        hsn : $("#hsn").val(),

        unit : $("#item_units").val(),
        inter : inter,
        intra : intra,
        sell_price : $("#sell_price").val(),
        cost_price : $("#cost_price").val(),
        sell_acc : $("#sell_acc").val(),
        cost_acc : $("#cost_acc").val(),
        sell_desc : $("#sell_desc").val(),
        cost_desc : $("#cost_desc").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalItem").reset();
        reloadItem();
      },
  });        
});


function reloadItem() {
  $.ajax({
    url: "{% url 'vendor_credit_item_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('.itm');
      dropdown.empty();

      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}

// account modal

$(document).on("click","#accountSave",function(){

  $.ajax({
    
    type : 'POST',
    url:"{% url 'vendor_credits_account' %}",
    
    data:{
        actype : $("#acct_type").val(),
        acname : $("#acct_name").val(),
     
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalAccount").reset();
        reloadAccount();
      },
  });        
});


function reloadAccount() {
  $.ajax({
    url: "{% url 'vendor_credits_account_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('.acnt');
      dropdown.empty();

      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}

</script>

<script>
var rowCount = 1;
$(document).ready(function () {
  // Counter for row IDs

  // Function to calculate the row amount
  function calculateRowAmount(row) {
    var qty = parseFloat(row.find('.qty').val());
    var rate = parseFloat(row.find('.rate').val());
    var tax = parseFloat(row.find('.tax').val());
    var discount = parseFloat(row.find('.discount').val());

    var rowAmount = (qty * rate) - discount;
    var taxAmount = (rowAmount * tax) / 100;

    row.find('.amount').val(rowAmount.toFixed(2));
    row.find('.taxamount').val(taxAmount.toFixed(2));
    
    
    return rowAmount;
    calculateTaxAmount();
  }

  // Function to calculate the subtotal
  function calculateSubtotal() {
    var subtotal = 0;
    $('#item_table tbody tr').each(function () {
      subtotal += calculateRowAmount($(this));
    });
    $('#subtotal').val(subtotal.toFixed(2));
  }

// Function to calculate the grand total
function calculateGrandTotal() {
  var grandTotal = 0;
  var totalTaxAmount = 0;

  $('#item_table tbody tr').each(function () {
    var rowAmount = calculateRowAmount($(this));
    grandTotal += rowAmount;
    var taxAmount = parseFloat($(this).find('.taxamount').val());
    grandTotal += taxAmount;
    totalTaxAmount += taxAmount;
  });
  var shippingCharges = parseFloat($('#shipping').val());
  grandTotal += shippingCharges;
  var adjustments = parseFloat($('#adjustment').val());
  grandTotal += adjustments;

  $('#grandtotal').val(grandTotal.toFixed(2));
  $('#total_taxamount').val(totalTaxAmount.toFixed(2));
}

  
  // Bind the handleItemChange function to the change event for elements with the class .item_select
  $('#item_table').on('change', '#item1', function () {
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
    toggleDateInput();
    calculateTaxAmount();
  });

  
  $('#item_table').on('change', '.tax', function () {
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
  });
  $('#item_table').on('change', '.adjustment', function () {
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
  });

  // Function to fetch and populate items based on bill number
  function populateItems(billNumber, itemSelect) {
    // Make an AJAX request to fetch bill items for the selected bill number
    $.ajax({
        type: 'GET',
        url: "{% url 'get_bill_items' %}",  // URL for fetching bill items
        data: {
            'id': billNumber
        },
        success: function (data) {
            itemSelect.empty();  // Clear previous options

            // Append the "Select Item" option with an empty value
            itemSelect.append($('<option>', {
                value: '',
                text: 'Select Item',
                hidden: 'hidden'
            }));

            if (data.bill_item_data.length > 0) {
                $.each(data.bill_item_data, function (index, bill_item_data) {
                    itemSelect.append($('<option>', {
                        value: bill_item_data,
                        text: bill_item_data
                    }));
                });
            } else {
                itemSelect.append($('<option>', {
                    text: 'No items found'
                }));
            }
        }
    });
  }

  // Add an event listener for the change event on the select tag with id 'bill_number'
  $('#bill_number').on('change', function () {
    // Get the selected bill number
    const selectedBillNumber = $(this).val();

    // Call the populateItems function for the default row (item1)
    populateItems(selectedBillNumber, $('#item1'));

    // Clear data in the default row
    $('#hsn1').val('');
    $('#qty1').val('0');
    $('#rate1').val('0');
    $('#discount1').val('0');
    $('#tax1').val('');
    $('#taxamount1').val('');
    $('#amount1').val('0.00');

    $('#subtotal').val('0.00');
    $('#igst').val('0.00');
    $('#cgst').val('0.00');
    $('#sgst').val('0.00');
    $('#total_taxamount').val('0.00');
    $('#shipping').val('0.00');
    $('#adjustment').val('0.00');
    $('#grandtotal').val('0.00');

    // Delete any appended rows
    $('#item_table tbody tr[id^="row"]').not('#row1').remove();
  });

  $('#add-row').click(function () {
    rowCount++; // Increment row counter
    var newRow = `
      <tr id='row${rowCount}'>
        <td style="width: 9%;">
          <div>
            <select class='form-control bg-light text-dark  border-0 item_select itm' name='item[]' id='item${rowCount}'>
              <option value=" " selected hidden>Select Item</option>
             
            </select>
          </div>
        </td>

        
        <td style="width: 14%;" class='text-right'>
          <input type='text' id='hsn${rowCount}' class='text-right bg-light text-dark hsn form-control' name='hsn[]'>
        </td>

        
        <td style="width: 9%;" class='text-right'>
          <input type='number' id='qty${rowCount}' class='text-right bg-light text-dark qty form-control' name='quantity[]' value='0'>
        </td>
        
        <td style="width: 12%;" class='text-right'>
          <input type='number' id='rate${rowCount}' class='text-right bg-light text-dark rate form-control' name='rate[]' value='0'>
        </td>
        
        <td style="width: 9%;" class='text-right'>
          <input type='number' id='discount${rowCount}' class='text-right bg-light text-dark discount form-control' name='discount[]' value='0'>
        </td>
        
        <td style="width: 14%;" class='text-right'>
          <select name='tax[]'  id='tax${rowCount}' class='form-control bg-light text-dark text-right border-0 tax' onclick=' toggleDateInput()'>
            <option value="">Select</option>
            <optgroup class="text-center" label="GST">
              <option value="0">0% GST(0%)</option>
              <option value="3">3.0% GST(3%)</option>
              <option value="5">5.0% GST(5%)</option>
              <option value="12">12.0% GST(12%)</option>
              <option value="18">18.0% GST(18%)</option>
              <option value="28">28.0% GST(28%)</option>
            </optgroup>
            <optgroup  class="text-center" label="IGST">
              
              <option value="0">0% IGST(0%)</option>
              <option value="3">3.0% IGST(3%)</option>
              <option value="5">5.0% IGST(5%)</option>
              <option value="12">12.0% IGST(12%)</option>
              <option value="18">18.0% IGST(18%)</option>
              <option value="28">28.0% IGST(28%)</option>             
            </optgroup>
          </select>
        </td>
        
        <td style="display: none;">
          <input type="text" name='taxamount' id="taxamount${rowCount}" class="form-control bg-light text-dark taxamount" />
        </td>
        
        <td style="width: 14%;" class='text-right'>
          <input type='number' id='amount${rowCount}' class='text-right bg-light text-dark form-control amount' name='amount[]' value='0.00'>
        </td>
        
        <td class='text-center'>
  <button type='button' id='del_btn${rowCount}' class='btn btn1 text-white btn-sm btn-outline-warning rounded-circle delete-row' style='width:30px'><i class="fa fa-close"></i></button>
  <button type='button' class='btn btn1 text-white btn-sm btn-outline-warning rounded-circle clone-row' data-row='${rowCount}' style='width:30px'><i class="fa fa-clone"></i></button>
</td>

      </tr>
    `;
  $('#item_table tbody').append(newRow);
    const newItemSelect = $(`#item${rowCount}`);

    // Get the selected bill number from the 'bill_number' dropdown
    const selectedBillNumber = $('#bill_number').val();

    // Call the populateItems function for the newly added row
    populateItems(selectedBillNumber, newItemSelect);
    toggleDateInput();
    calculateSubtotal();
    calculateGrandTotal();
  });

  $('#item_table').on('click', '.delete-row', function () {
    $(this).closest('tr').remove();
    calculateSubtotal();
    calculateGrandTotal();
    calculateTaxAmount();
  });
  $('#srcofsupply').on('change', function () {
  var row = $(this).closest('tr');
  calculateRowAmount(row);
  calculateSubtotal();
  calculateGrandTotal();
  toggleDateInput();
  calculateTaxAmount();

  // Calculate total tax amount and its IGST amount
  var totalTaxAmount = 0;
  var totalIGSTAmount = 0;

  $('#item_table tbody tr').each(function () {
    var tax = $(this).find('.tax').val();
    var amount = $(this).find('.amount').val();

    var taxAmount = amount * (tax / 100);
    totalTaxAmount += taxAmount;

    if (tax.startsWith('IGST')) {
      totalIGSTAmount += taxAmount;
    }
  });

  // Update the total tax amount and its IGST amount in the UI
  $('#total_taxamount').val(totalTaxAmount.toFixed(2));
  $('#total_igstamount').val(totalIGSTAmount.toFixed(2));
});

  $(document).ready(function() {
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
    toggleDateInput();
    calculateTaxAmount();
});
  // Input change event for quantity, rate, and discount
  $('#item_table').on('input', '.qty, .rate, .discount,.tax', function () {
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
    toggleDateInput();
    calculateTaxAmount();
  });

  $('#shipping').on('input', function () {
    var shippingAmount = parseFloat($(this).val());5
    $('#shipping_charge').val(shippingAmount.toFixed(2));
    calculateGrandTotal();
  });

  $('#adjustment').on('input', function () {
    var adjustmentAmount = parseFloat($(this).val());5
    $('#shipping_charge').val(adjustmentAmount.toFixed(2));
    calculateGrandTotal();
  });




  // Add an event listener to the fields in the item table
$('#item_table').on('click', '.item_select, .acnt, .rate, .qty, .tax, .discount', function () {
  var row = $(this).closest('tr');
  var taxElement = row.find('.tax');

  var checkbox = document.getElementById("srcofsupply");
  var vale = checkbox.value;
  var company_state = document.getElementById("cstate");
  var com_state= company_state.value;

  if (vale === com_state) {
    taxElement.find('optgroup[label="GST"]').show();
    taxElement.find('optgroup[label="IGST"]').hide();
  } else {
    taxElement.find('optgroup[label="GST"]').hide();
    taxElement.find('optgroup[label="IGST"]').show();
  }
});

// Event handler for clone button
$('#item_table').on('click', '.clone-row', function () {
  var row = $(this).closest('tr');
  var clonedRow = row.clone(); // Clone the current row
  var newRowId = 'row' + rowCount; // Generate a new ID for the cloned row
  clonedRow.attr('id', newRowId); // Set the new ID for the cloned row

  // Clone the options for tax, account, and item
  var currentItem = row.find('.item_select').val();
  clonedRow.find('.item_select').val(currentItem);
  var currentAccount = row.find('.acnt').val();
  clonedRow.find('.acnt').val(currentAccount);
  var currentTax = row.find('.tax').val();
  clonedRow.find('.tax').val(currentTax);

  rowCount++; // Increment row counter

  $('#item_table tbody').append(clonedRow);
  var row = $(this).closest('tr');
  calculateRowAmount(row);
  calculateSubtotal();
  calculateGrandTotal();
  toggleDateInput();
  calculateTaxAmount();
  toggleDateInput();
});


       

});
function calculateTaxAmount() {
        var checkbox = document.getElementById("srcofsupply");
        var vale=checkbox.value;
        var srcofsupply = vale; // Replace with the actual value of srcofsupply
        var company_state = document.getElementById("cstate");
        var com_state= company_state.value;
        

        var subtotal = parseFloat(document.getElementById("subtotal").value);
        var shipping = parseFloat(document.getElementById("shipping").value);
        var tax = parseFloat(document.getElementById("total_taxamount").value);
        
        var tax_rate = 0.0; // Default tax rate for IGST
        if (srcofsupply === com_state) {
            tax_rate =tax; // Tax rate for CGST/SGST
        }

        var total_taxamount = tax_rate;

        var cgst = 0.00;
        var sgst = 0.00;
        var igst = 0.00;

        if (srcofsupply === com_state) {
            cgst = total_taxamount / 2;
            sgst = total_taxamount / 2;
        } else {
            igst = tax;
        }

        document.getElementById("cgst").value = cgst.toFixed(2);
        document.getElementById("sgst").value = sgst.toFixed(2);
        document.getElementById("igst").value = igst.toFixed(2);

        if (srcofsupply === com_state) {
            document.getElementById("tr_igst").style.display = "none";
            document.getElementById("tr_cgst").style.display = "";
            document.getElementById("tr_sgst").style.display = "";
        } else {
            document.getElementById("tr_igst").style.display = "";
            document.getElementById("tr_cgst").style.display = "none";
            document.getElementById("tr_sgst").style.display = "none";
        }

        document.getElementById("total_taxamount").value = total_taxamount.toFixed(2);
        var grandtotal = subtotal + total_taxamount + shipping;
        document.getElementById("grandtotal").value = grandtotal.toFixed(2);
    }

    // Call the function initially on page load
    

    // Add event listeners to update tax amounts when subtotal or shipping changes
    document.getElementById("subtotal").addEventListener("input", calculateTaxAmount);
    document.getElementById("shipping").addEventListener("input", calculateTaxAmount);
    

function toggleDateInput() {
      var checkbox = document.getElementById("srcofsupply");
      var vale=checkbox.value;
      var company_state = document.getElementById("cstate");
      var com_state= company_state.value;
      
      for (var i = 1; i <= rowCount; i++) {
        var taxElement = $('#tax' + i);

        if (vale === com_state) {
            taxElement.find('optgroup[label="GST"]').show();
            taxElement.find('optgroup[label="IGST"]').hide();
        } else {
            taxElement.find('optgroup[label="GST"]').hide();
            taxElement.find('optgroup[label="IGST"]').show();
        }
    }
  }

  function test(taxamount) {
        console.log('test333');
        console.log(taxamount)
        d = 0;
        var checkbox = document.getElementById("srcofsupply");
        var vale=checkbox.value;
        var company_state = document.getElementById("cstate");
        var com_state= company_state.value;
        console.log(pos)
        console.log('state')
        console.log(state)
        console.log('state')
        console.log('----------')
        if ( vale === com_state) {
            console.log(pos);
            console.log(state);
            console.log(taxamount);
            gst = taxamount / 2;
            console.log(gst);
            $('#cgst').val(parseFloat(gst.toFixed(2)));
            $('#sgst').val(parseFloat(gst.toFixed(2)));
            $('#igst').val(parseFloat(d.toFixed(2)));
            
            // document.getElementById('tr_cgst').style= ('display: flex');
            
            // document.getElementById('tr_sgst').style= ('display: flex');
            // document.getElementById('tr_igst').style= ('display: none');

           
        }
        else{
            gst = taxamount ;
            console.log(gst);
            $('#cgst').val(parseFloat(d.toFixed(2)));
            $('#sgst').val(parseFloat(d.toFixed(2)));
            $('#igst').val(parseFloat(gst.toFixed(2)));
        }
        var checkbox = document.getElementById("srcofsupply");
        var vale=checkbox.value;
        var company_state = document.getElementById("cstate");
        var com_state= company_state.value;
        var pos= "[KL]-Kerala"
        if (vale==com_state){

        }

        if (vale !=  com_state) {
            console.log(pos);
            console.log(state);
            document.getElementById('tr_cgst').style=('display: none');
            document.getElementById('tr_sgst').style= ('display: none');
            document.getElementById('tr_igst').style= ('display: block');
        }
        else{
            document.getElementById('tr_cgst').style=('display: block');
            document.getElementById('tr_sgst').style= ('display: block');
            document.getElementById('tr_igst').style= ('display: none');
        }
    }

</script>


<script>
  $(document).ready(function () {


    var roinc = 0
    console.log("ajax");
    // Function to calculate the row amount
    function calculateRowAmount(row) {
      var qty = parseFloat(row.find('.qty').val());
      var rate = parseFloat(row.find('.rate').val());
      var tax = parseFloat(row.find('.tax').val());
      var discount = parseFloat(row.find('.discount').val());

      var rowAmount = (qty * rate) - discount;
      var taxAmount = (rowAmount * tax) / 100;

      row.find('.amount').val(rowAmount.toFixed(2));
      row.find('.taxamount').val(taxAmount.toFixed(2));
      
      
      return rowAmount;
      calculateTaxAmount();
    }

    // Function to calculate the subtotal
    function calculateSubtotal() {
      var subtotal = 0;
      $('#item_table tbody tr').each(function () {
        subtotal += calculateRowAmount($(this));
      });
      $('#subtotal').val(subtotal.toFixed(2));
    }

    // Function to calculate the grand total
    function calculateGrandTotal() {
      var grandTotal = 0;
      var totalTaxAmount = 0;

      $('#item_table tbody tr').each(function () {
        var rowAmount = calculateRowAmount($(this));
        grandTotal += rowAmount;
        var taxAmount = parseFloat($(this).find('.taxamount').val());
        grandTotal += taxAmount;
        totalTaxAmount += taxAmount;
      });
      var shippingCharges = parseFloat($('#shipping').val());
      grandTotal += shippingCharges;
      var adjustments = parseFloat($('#adjustment').val());
      grandTotal += adjustments;

      $('#grandtotal').val(grandTotal.toFixed(2));
      $('#total_taxamount').val(totalTaxAmount.toFixed(2));
    }

    
    // var place = document.getElementById('pos').value;

    $(document).on('click', '#item1', function () {
      select = $('#item1').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate1').value = data
          document.getElementById('hsn1').value = data5
          document.getElementById('qty1').value = data6
          document.getElementById('discount1').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty1').attr('min', 0);
          $('#qty1').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax1');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item2', function () {
      select = $('#item2').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate2').value = data
          document.getElementById('hsn2').value = data5
          document.getElementById('qty2').value = data6
          document.getElementById('discount2').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty2').attr('min', 0);
          $('#qty2').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax2');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item3', function () {
      select = $('#item3').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate3').value = data
          document.getElementById('hsn3').value = data5
          document.getElementById('qty3').value = data6
          document.getElementById('discount3').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty3').attr('min', 0);
          $('#qty3').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax3');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item4', function () {
      select = $('#item4').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate4').value = data
          document.getElementById('hsn4').value = data5
          document.getElementById('qty4').value = data6
          document.getElementById('discount4').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty4').attr('min', 0);
          $('#qty4').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax4');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item5', function () {
      select = $('#item5').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate5').value = data
          document.getElementById('hsn5').value = data5
          document.getElementById('qty5').value = data6
          document.getElementById('discount5').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty5').attr('min', 0);
          $('#qty5').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax5');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item6', function () {
      select = $('#item6').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate6').value = data
          document.getElementById('hsn6').value = data5
          document.getElementById('qty6').value = data6
          document.getElementById('discount6').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty6').attr('min', 0);
          $('#qty6').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax6');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item7', function () {
      select = $('#item7').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate7').value = data
          document.getElementById('hsn7').value = data5
          document.getElementById('qty7').value = data6
          document.getElementById('discount7').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty7').attr('min', 0);
          $('#qty7').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax7');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item8', function () {
      select = $('#item8').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate8').value = data
          document.getElementById('hsn8').value = data5
          document.getElementById('qty8').value = data6
          document.getElementById('discount8').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty8').attr('min', 0);
          $('#qty8').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax8');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item9', function () {
      select = $('#item9').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate9').value = data
          document.getElementById('hsn9').value = data5
          document.getElementById('qty9').value = data6
          document.getElementById('discount9').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty9').attr('min', 0);
          $('#qty9').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax9');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item10', function () {
      select = $('#item10').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate10').value = data
          document.getElementById('hsn10').value = data5
          document.getElementById('qty10').value = data6
          document.getElementById('discount10').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty10').attr('min', 0);
          $('#qty10').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax10');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item11', function () {
      select = $('#item11').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate11').value = data
          document.getElementById('hsn11').value = data5
          document.getElementById('qty11').value = data6
          document.getElementById('discount11').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty11').attr('min', 0);
          $('#qty11').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax11');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item12', function () {
      select = $('#item12').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate12').value = data
          document.getElementById('hsn12').value = data5
          document.getElementById('qty12').value = data6
          document.getElementById('discount12').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty12').attr('min', 0);
          $('#qty12').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax12');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item13', function () {
      select = $('#item13').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate13').value = data
          document.getElementById('hsn13').value = data5
          document.getElementById('qty13').value = data6
          document.getElementById('discount13').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty13').attr('min', 0);
          $('#qty13').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax13');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item14', function () {
      select = $('#item14').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate14').value = data
          document.getElementById('hsn14').value = data5
          document.getElementById('qty14').value = data6
          document.getElementById('discount14').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty14').attr('min', 0);
          $('#qty14').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax14');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item15', function () {
      select = $('#item15').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate15').value = data
          document.getElementById('hsn15').value = data5
          document.getElementById('qty15').value = data6
          document.getElementById('discount15').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty15').attr('min', 0);
          $('#qty15').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax15');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item16', function () {
      select = $('#item16').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate16').value = data
          document.getElementById('hsn16').value = data5
          document.getElementById('qty16').value = data6
          document.getElementById('discount16').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty16').attr('min', 0);
          $('#qty16').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax16');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item17', function () {
      select = $('#item17').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate17').value = data
          document.getElementById('hsn17').value = data5
          document.getElementById('qty17').value = data6
          document.getElementById('discount17').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty17').attr('min', 0);
          $('#qty17').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax17');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item18', function () {
      select = $('#item18').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate18').value = data
          document.getElementById('hsn18').value = data5
          document.getElementById('qty18').value = data6
          document.getElementById('discount18').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty18').attr('min', 0);
          $('#qty18').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax18');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item19', function () {
      select = $('#item19').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate19').value = data
          document.getElementById('hsn19').value = data5
          document.getElementById('qty19').value = data6
          document.getElementById('discount19').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty19').attr('min', 0);
          $('#qty19').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax19');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item20', function () {
      select = $('#item20').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate20').value = data
          document.getElementById('hsn20').value = data5
          document.getElementById('qty20').value = data6
          document.getElementById('discount20').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty20').attr('min', 0);
          $('#qty20').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax20');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item21', function () {
      select = $('#item21').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate21').value = data
          document.getElementById('hsn21').value = data5
          document.getElementById('qty21').value = data6
          document.getElementById('discount21').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty21').attr('min', 0);
          $('#qty21').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax21');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item22', function () {
      select = $('#item22').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate22').value = data
          document.getElementById('hsn22').value = data5
          document.getElementById('qty22').value = data6
          document.getElementById('discount22').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty22').attr('min', 0);
          $('#qty22').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax22');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item23', function () {
      select = $('#item23').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate23').value = data
          document.getElementById('hsn23').value = data5
          document.getElementById('qty23').value = data6
          document.getElementById('discount23').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty23').attr('min', 0);
          $('#qty23').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax23');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item24', function () {
      select = $('#item24').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate24').value = data
          document.getElementById('hsn24').value = data5
          document.getElementById('qty24').value = data6
          document.getElementById('discount24').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty24').attr('min', 0);
          $('#qty24').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax24');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item25', function () {
      select = $('#item25').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate25').value = data
          document.getElementById('hsn25').value = data5
          document.getElementById('qty25').value = data6
          document.getElementById('discount25').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty25').attr('min', 0);
          $('#qty25').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax25');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item26', function () {
      select = $('#item26').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate26').value = data
          document.getElementById('hsn26').value = data5
          document.getElementById('qty26').value = data6
          document.getElementById('discount26').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty26').attr('min', 0);
          $('#qty26').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax26');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item27', function () {
      select = $('#item27').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate27').value = data
          document.getElementById('hsn27').value = data5
          document.getElementById('qty27').value = data6
          document.getElementById('discount27').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty27').attr('min', 0);
          $('#qty27').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax27');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item28', function () {
      select = $('#item28').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate28').value = data
          document.getElementById('hsn28').value = data5
          document.getElementById('qty28').value = data6
          document.getElementById('discount28').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty28').attr('min', 0);
          $('#qty28').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax28');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item29', function () {
      select = $('#item29').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate29').value = data
          document.getElementById('hsn29').value = data5
          document.getElementById('qty29').value = data6
          document.getElementById('discount29').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty29').attr('min', 0);
          $('#qty29').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax29');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item30', function () {
      select = $('#item30').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate30').value = data
          document.getElementById('hsn30').value = data5
          document.getElementById('qty30').value = data6
          document.getElementById('discount30').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty30').attr('min', 0);
          $('#qty30').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax30');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item31', function () {
      select = $('#item31').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate31').value = data
          document.getElementById('hsn31').value = data5
          document.getElementById('qty31').value = data6
          document.getElementById('discount31').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty31').attr('min', 0);
          $('#qty31').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax31');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item32', function () {
      select = $('#item32').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate32').value = data
          document.getElementById('hsn32').value = data5
          document.getElementById('qty32').value = data6
          document.getElementById('discount32').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty32').attr('min', 0);
          $('#qty32').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax32');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item33', function () {
      select = $('#item33').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate33').value = data
          document.getElementById('hsn33').value = data5
          document.getElementById('qty33').value = data6
          document.getElementById('discount33').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty33').attr('min', 0);
          $('#qty33').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax33');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item34', function () {
      select = $('#item34').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate34').value = data
          document.getElementById('hsn34').value = data5
          document.getElementById('qty34').value = data6
          document.getElementById('discount34').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty34').attr('min', 0);
          $('#qty34').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax34');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item35', function () {
      select = $('#item35').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate35').value = data
          document.getElementById('hsn35').value = data5
          document.getElementById('qty35').value = data6
          document.getElementById('discount35').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty35').attr('min', 0);
          $('#qty35').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax35');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

    $(document).on('click', '#item36', function () {
      select = $('#item36').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate36').value = data
          document.getElementById('hsn36').value = data5
          document.getElementById('qty36').value = data6
          document.getElementById('discount36').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty36').attr('min', 0);
          $('#qty36').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax36');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item37', function () {
      select = $('#item37').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate37').value = data
          document.getElementById('hsn37').value = data5
          document.getElementById('qty37').value = data6
          document.getElementById('discount37').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty37').attr('min', 0);
          $('#qty37').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax37');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item38', function () {
      select = $('#item38').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate38').value = data
          document.getElementById('hsn38').value = data5
          document.getElementById('qty38').value = data6
          document.getElementById('discount38').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty38').attr('min', 0);
          $('#qty38').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax38');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item39', function () {
      select = $('#item39').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate39').value = data
          document.getElementById('hsn39').value = data5
          document.getElementById('qty39').value = data6
          document.getElementById('discount39').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty39').attr('min', 0);
          $('#qty39').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax39');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });


    $(document).on('click', '#item40', function () {
      select = $('#item40').val();
      billno= $('#bill_number').val();
      customer = $('#customer_sel').val();
      console.log(select);
      console.log(customer);
      $.ajax({
        type: "GET",
        url: "{% url 'itemdata_vendor_credit' %}",
        data: {
          id: select,
          cust: customer,
          bill: billno

        },
        success: function (response) {
          console.log(response)
          data = response.rate

          data1 = response.gst
          data2 = response.igst
          data3 = response.pos
          data4=response.place
          data5 = response.hsn
          data6 = response.qty
          data7 = response.dis
          data8 = response.amt
          data9 = response.tax

          document.getElementById('rate40').value = data
          document.getElementById('hsn40').value = data5
          document.getElementById('qty40').value = data6
          document.getElementById('discount40').value = data7

          // Set the min and max attributes for the quantity input box
          $('#qty40').attr('min', 0);
          $('#qty40').attr('max', data6);

          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var company_state = document.getElementById("cstate");
          var com_state= company_state.value;
          const taxSelect = $('#tax40');

          taxSelect.append($('<option>', {
            value: response.tax,
            text: response.tax,
            hidden: 'hidden'
          }));

          // Set the selected option
          taxSelect.val(response.tax);
          // Bind the handleItemChange function to the change event for elements with the class .item_select
          
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
            


        }
      });

    });

  });
</script>


<!-- item quantity error section -->

<script>
$(document).ready(function () {
    // Function to fetch and populate item details based on item selection
    function populateItemDetails(selectedItem, rowId) {
        // Make an AJAX request to fetch item details for the selected item
        $.ajax({
            type: 'GET',
            url: "{% url 'get_item_details' %}",  // URL for fetching item details
            data: {
                'item': selectedItem
            },
            success: function (data) {
                // Populate details in the corresponding row
                $(`#hsn${rowId}`).val(data.hsn);
                $(`#qty${rowId}`).val(data.quantity);
                $(`#rate${rowId}`).val(data.rate);
                $(`#tax${rowId}`).val(data.tax);

                // Update the max attribute of the quantity input based on the fetched quantity limit
                $(`#qty${rowId}`).attr('max', data.quantity_limit);
            }
        });
    }

    // Add an event listener for the change event on item select elements
    $('#item_table tbody').on('change', 'select.item_select', function () {
        // Get the selected item and the corresponding row ID
        const selectedItem = $(this).val();
        const rowId = $(this).closest('tr').attr('id').replace('row', '');

        // Call the populateItemDetails function for the selected item and row
        populateItemDetails(selectedItem, rowId);
    });

    // Add an event listener for the input event on quantity inputs in the item table
    $('#item_table tbody').on('input', 'input.qty', function () {
        // Get the current quantity value
        const currentQty = parseFloat($(this).val());

        // Get the corresponding row ID
        const rowId = $(this).closest('tr').attr('id').replace('row', '');

        // Get the displayed quantity value from the item details
        const displayedQty = parseFloat($(`#qty${rowId}`).val());

        // Get the maximum allowed quantity
        const maxAllowedQty = parseFloat($(this).attr('max'));

        // Check if the current quantity exceeds the maximum allowed quantity
        if (currentQty > maxAllowedQty) {
            // Display an error message
            alert(`Error: Entered quantity cannot exceed ${maxAllowedQty}`);
            // Optionally, reset the quantity to the maximum allowed value
            $(this).val(maxAllowedQty);
        }
    });
});

</script>


<script>

  function Draft() { 
    var frm = document.getElementById("forms");
    frm.action = ("{% url 'create_vendor_credit' %}")
    
  }

  function Save() {
    var frm = document.getElementById("forms");
    frm.action = ("{% url 'create_vendor_credit' %}") 
  }

</script>




{% endblock %}





